<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Live Tracking Pengujian</title>

<!-- Font Poppins -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Poppins', sans-serif;
  background:linear-gradient(135deg,#0f5f5c,#1b8a83);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.container{
  background:#f5f7f8;
  width:90%;
  max-width:900px;
  padding:40px;
  border-radius:25px;
  box-shadow:0 15px 40px rgba(0,0,0,0.2);
  text-align:center;
}

.logo{
  width:100px;
  margin-bottom:15px;
}

h2{
  color:#0f5f5c;
  margin-bottom:25px;
}

.search-box{
  display:flex;
  justify-content:center;
  gap:10px;
}

input{
  padding:12px;
  width:60%;
  border-radius:12px;
  border:1px solid #ccc;
}

button{
  padding:12px 25px;
  border:none;
  border-radius:12px;
  background:#1b8a83;
  color:white;
  font-weight:600;
  cursor:pointer;
}

button:hover{
  background:#146e69;
}

.card{
  margin-top:30px;
  background:white;
  padding:25px;
  border-radius:15px;
  text-align:left;
  box-shadow:0 10px 25px rgba(0,0,0,0.1);
}

.notfound{
  margin-top:20px;
  color:red;
  font-weight:600;
}
</style>
</head>

<body>

<div class="container">

<img src="logofix_bpmkp.png" class="logo">

<h2>LIVE TRACKING PENGUJIAN</h2>

<div class="search-box">
  <input type="text" id="cari" placeholder="Masukkan Nomor Permintaan">
  <button onclick="cariData()">Cari</button>
</div>

<div id="hasil"></div>

</div>

<script>

async function cariData(){

  const keyword = document.getElementById("cari").value.trim();
  const hasil = document.getElementById("hasil");

  if(keyword === ""){
    hasil.innerHTML = "<div class='notfound'>Masukkan nomor permintaan dulu.</div>";
    return;
  }

  const response = await fetch("LINK_CSV_KAMU");
  const data = await response.text();

  const rows = data.split("\n").slice(1);

  let ditemukan = false;

  rows.forEach(row => {

    const kolom = row.split(",");

    if(kolom[2] && kolom[2].trim() === keyword){

      hasil.innerHTML = `
      <div class="card">
        <p><b>Nama Pelanggan:</b> ${kolom[0]}</p>
        <p><b>Nomor Permintaan:</b> ${kolom[2]}</p>
        <p><b>Jenis Pengujian:</b> ${kolom[3]}</p>
        <p><b>Estimasi Selesai:</b> ${kolom[11]}</p>
        <p><b>Keterangan:</b> ${kolom[12]}</p>
      </div>
      `;

      ditemukan = true;
    }

  });

  if(!ditemukan){
    hasil.innerHTML = "<div class='notfound'>Data tidak ditemukan.</div>";
  }

}

</script>

</body>
</html>
